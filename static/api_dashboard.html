<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API داشبورد تفاعلي</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Cairo', Arial, sans-serif;
            background: linear-gradient(120deg, #e3f0ff 0%, #f8fafd 100%);
            margin: 0;
            padding: 0;
        }
        .navbar {
            background: #0d47a1;
            color: #fff;
            padding: 0;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 56px;
            box-shadow: 0 2px 8px rgba(30,60,120,0.08);
        }
        .navbar .brand {
            font-size: 1.3em;
            font-weight: bold;
            padding: 0 32px;
            letter-spacing: 1px;
        }
        .navbar .menu {
            display: flex;
            align-items: center;
            gap: 18px;
            padding: 0 32px;
        }
        .navbar .menu button {
            background: #fff;
            color: #0d47a1;
            border: none;
            border-radius: 6px;
            padding: 7px 22px;
            font-size: 1em;
            font-weight: bold;
            cursor: pointer;
            transition: background 0.2s, color 0.2s;
        }
        .navbar .menu button.active, .navbar .menu button:hover {
            background: #1976d2;
            color: #fff;
        }
        .dashboard {
            max-width: 1200px;
            margin: 40px auto;
            background: #fff;
            border-radius: 18px;
            box-shadow: 0 6px 32px rgba(30,60,120,0.10);
            padding: 36px 28px;
        }
        h1 {
            text-align: center;
            color: #0d47a1;
            margin-bottom: 10px;
            letter-spacing: 1px;
        }
        .api-section {
            margin-bottom: 38px;
        }
        .endpoint {
            background: #f4f7fb;
            border-radius: 12px;
            margin-bottom: 22px;
            padding: 20px 22px 14px 22px;
            box-shadow: 0 1px 6px rgba(60,60,60,0.04);
            border: 1px solid #e3e7ee;
        }
        .endpoint h3 {
            margin: 0 0 10px 0;
            color: #1565c0;
            font-size: 1.13em;
        }
        .endpoint .method {
            display: inline-block;
            font-weight: bold;
            color: #fff;
            background: #1976d2;
            border-radius: 4px;
            padding: 2px 12px;
            margin-left: 8px;
            font-size: 0.97em;
        }
        .endpoint .url {
            font-family: monospace;
            color: #374151;
            background: #e3e7ee;
            border-radius: 4px;
            padding: 2px 10px;
            margin-left: 8px;
        }
        .endpoint label, .endpoint .req {
            font-size: 0.99em;
            color: #333;
            display: block;
            margin-bottom: 2px;
        }
        .endpoint .req {
            color: #b71c1c;
            font-size: 0.93em;
            margin-bottom: 6px;
        }
        .endpoint input, .endpoint textarea {
            width: 100%;
            margin: 7px 0 13px 0;
            padding: 9px;
            border-radius: 6px;
            border: 1px solid #bdbdbd;
            font-family: inherit;
            font-size: 1em;
            background: #fff;
        }
        .endpoint button {
            background: linear-gradient(90deg, #1976d2 60%, #0d47a1 100%);
            color: #fff;
            border: none;
            border-radius: 6px;
            padding: 9px 28px;
            font-size: 1em;
            cursor: pointer;
            transition: background 0.2s;
            margin-bottom: 6px;
        }
        .endpoint button:hover {
            background: linear-gradient(90deg, #0d47a1 60%, #1976d2 100%);
        }
        .response {
            background: #23272e;
            color: #e3e7ee;
            border-radius: 7px;
            padding: 12px 14px;
            margin-top: 10px;
            font-size: 1.01em;
            direction: ltr;
            overflow-x: auto;
        }
        .section-title {
            color: #263238;
            border-right: 6px solid #1976d2;
            padding-right: 14px;
            margin-bottom: 22px;
            font-size: 1.22em;
            font-weight: bold;
        }
        .token-box {
            margin-bottom: 18px;
            background: #e3e7ee;
            border-radius: 7px;
            padding: 10px 14px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .token-box input {
            width: 350px;
            max-width: 100%;
            margin: 0;
            font-size: 1em;
        }
        .drawer {
            display: none;
            position: fixed;
            top: 56px;
            right: 0;
            width: 340px;
            height: 100vh;
            background: #fff;
            box-shadow: -2px 0 16px rgba(30,60,120,0.10);
            z-index: 1000;
            overflow-y: auto;
            padding: 32px 18px 18px 18px;
        }
        .drawer.active {
            display: block;
        }
        .drawer h2 {
            color: #0d47a1;
            margin-top: 0;
            margin-bottom: 18px;
            font-size: 1.18em;
        }
        .drawer ul {
            list-style: none;
            padding: 0;
        }
        .drawer li {
            margin-bottom: 14px;
        }
        .drawer a {
            color: #1976d2;
            text-decoration: none;
            font-size: 1.07em;
            transition: color 0.2s;
        }
        .drawer a:hover {
            color: #0d47a1;
        }
        @media (max-width: 700px) {
            .dashboard { padding: 10px 2px; }
            .token-box { flex-direction: column; align-items: stretch; }
            .drawer { width: 100vw; }
        }
    </style>
</head>
<body>
    <div class="navbar">
        <span class="brand">API داشبورد</span>
        <div class="menu">
            <button id="testBtn" onclick="toggleDrawer()">اختبار الاندبوينت</button>
        </div>
    </div>
    <div class="drawer" id="drawer">
        <h2>أقسام نقاط النهاية</h2>
        <ul>
            <li><a href="#products">المنتجات (Products)</a></li>
            <li><a href="#shops">المتاجر (Shops)</a></li>
            <li><a href="#recommendations">التوصيات (Recommendations)</a></li>
            <li><a href="#reviews">المراجعات (Reviews)</a></li>
            <li><a href="#comparison">المقارنة (Comparison)</a></li>
            <li><a href="#favorites">التفضيلات والمفضلة</a></li>
            <li><a href="#notifications">الإشعارات</a></li>
            <li><a href="#auth">المصادقة (Authentication)</a></li>
        </ul>
    </div>
    <div class="dashboard">
        <h1>داشبورد نقاط النهاية (API) التفاعلي</h1>
        <div class="token-box">
            <label>توكن المصادقة (JWT):</label>
            <input type="text" id="token" placeholder="Bearer ...">
        </div>
        <div id="products" class="api-section">
            <div class="section-title">المنتجات (Products)</div>
            <div class="endpoint">
                <h3><span class="method">GET</span> <span class="url">/api/products/</span> قائمة المنتجات</h3>
                <span class="req">Headers: (اختياري) Authorization</span>
                <button onclick="testEndpoint('GET', '/api/products/', '', '', this)">اختبر</button>
                <div class="response"></div>
            </div>
            <div class="endpoint">
                <h3><span class="method">GET</span> <span class="url">/api/products/{product_id}/</span> تفاصيل منتج</h3>
                <span class="req">Path: product_id</span>
                <input type="text" placeholder="أدخل معرف المنتج" id="product_id_detail">
                <button onclick="testEndpoint('GET', '/api/products/' + document.getElementById('product_id_detail').value + '/', '', '', this)">اختبر</button>
                <div class="response"></div>
            </div>
            <div class="endpoint">
                <h3><span class="method">POST</span> <span class="url">/api/products/create/</span> إنشاء منتج جديد</h3>
                <span class="req">Headers: Authorization, Content-Type: multipart/form-data</span>
                <label>Body:</label>
                <textarea rows="3" placeholder='{"name": "...", "price": 100, "category_id": "..."}' id="body_create_product"></textarea>
                <button onclick="testEndpoint('POST', '/api/products/create/', document.getElementById('body_create_product').value, 'application/json', this)">اختبر</button>
                <div class="response"></div>
            </div>
            <!-- أضف باقي اندبوينت المنتجات مع متطلبات كل نقطة -->
        </div>
        <div id="shops" class="api-section">
            <div class="section-title">المتاجر (Shops)</div>
            <div class="endpoint">
                <h3><span class="method">GET</span> <span class="url">/api/shop/</span> قائمة المتاجر</h3>
                <button onclick="testEndpoint('GET', '/api/shop/', '', '', this)">اختبر</button>
                <div class="response"></div>
            </div>
            <div class="endpoint">
                <h3><span class="method">POST</span> <span class="url">/api/shop/create/</span> إنشاء متجر جديد</h3>
                <label>Body (form-data):</label>
                <textarea rows="2" placeholder='{"name": "...", "logo": "اختياري"}' id="body_create_shop"></textarea>
                <button onclick="testEndpoint('POST', '/api/shop/create/', document.getElementById('body_create_shop').value, 'application/json', this)">اختبر</button>
                <div class="response"></div>
            </div>
            <!-- أضف باقي اندبوينت المتاجر مع متطلبات كل نقطة -->
        </div>
        <div id="recommendations" class="api-section">
            <div class="section-title">التوصيات (Recommendations)</div>
            <div class="endpoint">
                <h3><span class="method">GET</span> <span class="url">/api/recommendations/</span> التوصيات المخصصة للمستخدم</h3>
                <button onclick="testEndpoint('GET', '/api/recommendations/', '', '', this)">اختبر</button>
                <div class="response"></div>
            </div>
            <!-- أضف باقي اندبوينت التوصيات مع متطلبات كل نقطة -->
        </div>
        <div id="reviews" class="api-section">
            <div class="section-title">المراجعات (Reviews)</div>
            <div class="endpoint">
                <h3><span class="method">POST</span> <span class="url">/reviews/add/</span> إضافة مراجعة</h3>
                <label>Body (JSON):</label>
                <textarea rows="2" placeholder='{"product_id": "...", "comment": "..."}' id="body_add_review"></textarea>
                <button onclick="testEndpoint('POST', '/reviews/add/', document.getElementById('body_add_review').value, 'application/json', this)">اختبر</button>
                <div class="response"></div>
            </div>
            <!-- أضف باقي اندبوينت المراجعات مع متطلبات كل نقطة -->
        </div>
        <div id="comparison" class="api-section">
            <div class="section-title">المقارنة (Comparison)</div>
            <div class="endpoint">
                <h3><span class="method">POST</span> <span class="url">/api/comparison/</span> مقارنة بين عدة منتجات</h3>
                <label>Body (JSON):</label>
                <textarea rows="2" placeholder='{"product_ids": ["id1", "id2"]}' id="body_compare_products"></textarea>
                <button onclick="testEndpoint('POST', '/api/comparison/', document.getElementById('body_compare_products').value, 'application/json', this)">اختبر</button>
                <div class="response"></div>
            </div>
            <!-- أضف باقي اندبوينت المقارنة مع متطلبات كل نقطة -->
        </div>
        <div id="favorites" class="api-section">
            <div class="section-title">التفضيلات والمفضلة</div>
            <div class="endpoint">
                <h3><span class="method">GET</span> <span class="url">/api/user/preferences/</span> تفضيلات المستخدم</h3>
                <button onclick="testEndpoint('GET', '/api/user/preferences/', '', '', this)">اختبر</button>
                <div class="response"></div>
            </div>
            <!-- أضف باقي اندبوينت التفضيلات مع متطلبات كل نقطة -->
        </div>
        <div id="notifications" class="api-section">
            <div class="section-title">الإشعارات (Notifications)</div>
            <div class="endpoint">
                <h3><span class="method">GET</span> <span class="url">/api/notifications/</span> قائمة الإشعارات</h3>
                <button onclick="testEndpoint('GET', '/api/notifications/', '', '', this)">اختبر</button>
                <div class="response"></div>
            </div>
        </div>
        <div id="auth" class="api-section">
            <div class="section-title">المصادقة (Authentication)</div>
            <div class="endpoint">
                <h3><span class="method">POST</span> <span class="url">/api/auth/register/</span> تسجيل مستخدم جديد</h3>
                <label>Body (JSON):</label>
                <textarea rows="2" placeholder='{"email": "user@email.com", "password": "your_password", "name": "User Name"}' id="body_register"></textarea>
                <button onclick="testEndpoint('POST', '/api/auth/register/', document.getElementById('body_register').value, 'application/json', this)">اختبر</button>
                <div class="response"></div>
            </div>
            <!-- أضف باقي اندبوينت المصادقة مع متطلبات كل نقطة -->
        </div>
    </div>
    <script>
        function toggleDrawer() {
            const drawer = document.getElementById('drawer');
            drawer.classList.toggle('active');
        }
        async function testEndpoint(method, url, body, contentType, btn) {
            const respDiv = btn.nextElementSibling;
            respDiv.textContent = '...جاري التنفيذ';
            let headers = {};
            const token = document.getElementById('token').value.trim();
            if (token) headers['Authorization'] = token;
            if (contentType) headers['Content-Type'] = contentType;
            try {
                const res = await fetch(url, {
                    method,
                    headers,
                    body: body && method !== 'GET' ? body : undefined
                });
                const text = await res.text();
                let formatted;
                try { formatted = JSON.stringify(JSON.parse(text), null, 2); } catch { formatted = text; }
                respDiv.textContent = formatted;
            } catch (e) {
                respDiv.textContent = 'خطأ في الاتصال: ' + e;
            }
        }
    </script>
</body>
</html>
