<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù€ API Endpoints</title>
    <meta name="description" content="Ø§Ø®ØªØ¨Ø± Ø¬Ù…ÙŠØ¹ ÙˆØ§Ø¬Ù‡Ø§Øª Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„ØªØ·Ø¨ÙŠÙ‚Ø§Øª (API) Ø¨Ø³Ù‡ÙˆÙ„Ø© ÙˆØ§Ø­ØªØ±Ø§ÙÙŠØ© Ù…Ø¹ Ø¬Ù„Ø¨ Ù…Ø¹Ù„Ù…Ø§Øª Ø­Ù‚ÙŠÙ‚ÙŠØ© Ù…Ù† Ø§Ù„Ø¯Ø§Ø´Ø¨ÙˆØ±Ø¯.">
    <link rel="stylesheet" href="/static/dashboard_style.css">
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { padding-top: 80px !important; }
        .navbar { background: linear-gradient(90deg, #1976d2 0%, #0d47a1 100%); color: #fff; padding: 0; display: flex; align-items: center; justify-content: space-between; height: 68px; box-shadow: 0 4px 18px rgba(30,60,120,0.13); border-radius: 0 0 18px 18px; position: fixed; top: 0; left: 0; width: 100vw; z-index: 100; }
        .navbar .brand { font-size: 1.6em; font-weight: bold; padding: 0 40px; display: flex; align-items: center; gap: 12px; letter-spacing: 1px; }
        .navbar .brand .icon { font-size: 2em; margin-left: 8px; filter: drop-shadow(0 2px 4px #0d47a1aa); }
        .navbar .menu { display: flex; align-items: center; gap: 12px; padding: 0 32px; }
        .navbar .menu button { background: rgba(255,255,255,0.13); color: #fff; border: none; border-radius: 50%; width: 44px; height: 44px; display: flex; align-items: center; justify-content: center; font-size: 1.5em; cursor: pointer; transition: background 0.2s, transform 0.2s; box-shadow: 0 2px 8px rgba(30,60,120,0.10); }
        .navbar .menu button:hover { background: #fff; color: #1976d2; transform: translateY(-2px) scale(1.08); }
        .api-tester { max-width: 900px; margin: 40px auto; background: #fff; border-radius: 18px; box-shadow: 0 6px 32px rgba(30,60,120,0.10); padding: 36px 28px; }
        h2 { color: #0d47a1; text-align: center; }
        .endpoint-row { display: flex; gap: 12px; align-items: center; margin-bottom: 18px; }
        .endpoint-row select, .endpoint-row input, .endpoint-row textarea { font-family: inherit; font-size: 1em; border-radius: 6px; border: 1px solid #bdbdbd; padding: 7px 10px; }
        .endpoint-row select, .endpoint-row input { min-width: 120px; }
        .endpoint-row input[type=text] { width: 220px; }
        .endpoint-row textarea { width: 320px; min-height: 36px; }
        .endpoint-row button { background: #1976d2; color: #fff; border: none; border-radius: 6px; padding: 8px 20px; font-size: 1em; cursor: pointer; margin-right: 8px; }
        .endpoint-row button:hover { background: #0d47a1; }
        .api-result { background: #f7fafd; border-radius: 10px; padding: 18px; margin-top: 18px; font-size: 0.98em; direction: ltr; text-align: left; overflow-x: auto; }
        .api-result-fixed {
            position: fixed;
            left: 0;
            right: 0;
            bottom: 0;
            background: #f7fafd;
            border-top: 2px solid #1976d2;
            border-radius: 18px 18px 0 0;
            box-shadow: 0 -2px 12px rgba(30,60,120,0.10);
            padding: 18px 24px;
            min-height: 120px;
            max-height: 40vh;
            overflow-y: auto;
            font-size: 0.98em;
            direction: ltr;
            text-align: left;
            z-index: 200;
            resize: vertical;
        }
        .param-btn { background: #ff9800; color: #fff; border: none; border-radius: 6px; padding: 4px 10px; font-size: 0.95em; cursor: pointer; margin-right: 6px; }
        .param-btn:hover { background: #e65100; }
        @media (max-width: 700px) { .api-tester { padding: 10px 2px; } .endpoint-row { flex-direction: column; align-items: stretch; } .endpoint-row input, .endpoint-row textarea, .endpoint-row select { width: 100% !important; min-width: 0; } }
    </style>
</head>
<body>
    <div class="navbar">
        <span class="brand"><span class="icon">ğŸ§ª</span> Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù€ API</span>
        <div class="menu">
            <button title="Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©" onclick="window.location.href='/apps-dashboard/'"><span>ğŸ </span></button>
            <button title="Ø®Ø±ÙˆØ¬" onclick="logout()" style="background:#b71c1c;"><span>ğŸ”“</span></button>
        </div>
    </div>
    <div class="api-tester">
        <h2>Ø§Ø®ØªØ¨Ø§Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù€ Endpoints Ø¨Ø³Ù‡ÙˆÙ„Ø©</h2>
        <div id="allEndpointsFlat" style="margin-bottom:40px;"></div>
        <div id="dynamicForm"></div>
        <div id="sectionTitle" style="font-size:1.15em;color:#0d47a1;font-weight:bold;margin-bottom:10px;display:none;"></div>
        <button id="showEndpointsBtn" style="margin:18px auto 0 auto;display:block;background:#1976d2;color:#fff;border:none;border-radius:8px;padding:10px 32px;font-size:1.1em;cursor:pointer;">Ø¹Ø±Ø¶ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ù†Ø¯Ø¨ÙˆÙŠÙ†ØªØ§Øª</button>
        <!-- Ø¹Ù†Ø§ØµØ± Ù…Ø®ÙÙŠØ© Ù…Ø·Ù„ÙˆØ¨Ø© Ù„Ù„Ù…Ù†Ø·Ù‚ -->
        <input type="hidden" id="endpoint">
        <input type="hidden" id="method">
        <input type="hidden" id="urlList">
        <input type="hidden" id="body">
        <span id="finalUrl" style="display:none;"></span>
    </div>
    <script>
        let lastProducts = [];
        let lastCategories = [];
        let lastShops = [];
        let lastUsers = [];
        async function fetchDashboardData() {
            const token = localStorage.getItem('access_token');
            try {
                const [productsRes, catsRes, shopsRes, usersRes] = await Promise.all([
                    fetch('/api/products/', { headers: { 'Authorization': 'Bearer ' + token } }),
                    fetch('/api/categories/', { headers: { 'Authorization': 'Bearer ' + token } }),
                    fetch('/api/shop/', { headers: { 'Authorization': 'Bearer ' + token } }),
                    fetch('/api/auth/users/', { headers: { 'Authorization': 'Bearer ' + token } })
                ]);
                lastProducts = productsRes.ok ? await productsRes.json() : [];
                lastCategories = catsRes.ok ? await catsRes.json() : [];
                lastShops = shopsRes.ok ? await shopsRes.json() : [];
                lastUsers = usersRes.ok ? await usersRes.json() : [];
            } catch (e) { }
        }
        fetchDashboardData();
        function insertParam(type) {
            let val = '';
            if(type==='id' && lastProducts.length) val = lastProducts[0].id;
            if(type==='catid' && lastCategories.length) val = lastCategories[0].id;
            if(type==='shopid' && lastShops.length) val = lastShops[0].id;
            if(type==='userid' && lastUsers.length) val = lastUsers[0].id;
            if(val) {
                const inp = document.getElementById('endpoint');
                let endpoint = inp.value;
                // Ø§Ø³ØªØ¨Ø¯Ø§Ù„ Ø£ÙˆÙ„ Ù…ÙƒØ§Ù† Ù…ØªÙˆÙ‚Ø¹ Ù„Ù„Ù…Ø¹Ø±Ù
                if(type==='id') endpoint = endpoint.replace('{id}', val);
                if(type==='catid') endpoint = endpoint.replace('{catid}', val);
                if(type==='shopid') endpoint = endpoint.replace('{shopid}', val);
                if(type==='userid') endpoint = endpoint.replace('{userid}', val);
                inp.value = endpoint;
                updateFinalUrl();
            }
        }
        // ÙƒØ´Ù Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø©
        document.getElementById('urlList').addEventListener('change', async function() {
            const val = this.value;
            // Ù‚Ø§Ø¦Ù…Ø© endpoints Ø§Ù„ØªÙŠ ØªØ­ØªØ§Ø¬ body Ù…Ø¹ Ø§Ù„Ø­Ù‚ÙˆÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©
            const endpointsWithBody = {
                '/api/products/': ['name', 'price', 'category', 'brand'],
                '/api/products/{id}/update/': ['name', 'price', 'category', 'brand'],
                '/api/categories/': ['name', 'description'],
                '/api/categories/{catid}/update/': ['name', 'description'],
                '/api/brands/': ['name', 'popularity', 'rating'],
                '/api/brands/{id}/update/': ['name', 'popularity', 'rating'],
                '/api/shop/': ['name', 'owner', 'address'],
                '/api/shop/{shopid}/update/': ['name', 'owner', 'address'],
                '/api/auth/users/': ['username', 'email', 'password'],
                '/api/auth/users/{userid}/update/': ['username', 'email'],
                '/api/promotions/': ['title', 'discount'],
                '/api/promotions/{id}/update/': ['title', 'discount']
            };
            let fields = endpointsWithBody[val] || [];
            const formDiv = document.getElementById('dynamicForm');
            formDiv.innerHTML = '';
            let oldData = {};
            // Ø¥Ø°Ø§ ÙƒØ§Ù† endpoint ÙÙŠÙ‡ Ù…Ø¹Ø±ÙØŒ Ø¬Ù„Ø¨ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø¯ÙŠÙ…Ø© ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
            let match = val.match(/\{(id|catid|shopid|userid)\}/);
            if(match) {
                let type = match[1];
                let id = '';
                if(type==='id' && lastProducts.length) id = lastProducts[0].id;
                if(type==='catid' && lastCategories.length) id = lastCategories[0].id;
                if(type==='shopid' && lastShops.length) id = lastShops[0].id;
                if(type==='userid' && lastUsers.length) id = lastUsers[0].id;
                if(id) {
                    // Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø±Ø§Ø¨Ø· Ø§Ù„ØªÙØ§ØµÙŠÙ„ ÙˆÙ„ÙŠØ³ Ø±Ø§Ø¨Ø· Ø§Ù„ØªØ­Ø¯ÙŠØ«
                    let url = val.replace('/update/','').replace('/delete/','').replace(`{${type}}`, id);
                    const token = localStorage.getItem('access_token');
                    try {
                        let res = await fetch(url, { headers: { 'Authorization': 'Bearer ' + token } });
                        if(res.ok) oldData = await res.json();
                    } catch(e){}
                }
            }
            if(fields.length) {
                fields.forEach(f => {
                    let v = '';
                    // Ø¯Ø¹Ù… Ø§Ù„Ù‚ÙŠÙ… Ø§Ù„Ù…ØªØ¯Ø§Ø®Ù„Ø© Ù…Ø«Ù„ category.name Ø£Ùˆ brand.name
                    if(oldData && oldData[f] !== undefined) v = oldData[f];
                    else if(f.includes('.') && oldData) {
                        try {
                            v = f.split('.').reduce((a,b)=>a&&a[b]?a[b]:null, oldData) || '';
                        } catch(e){}
                    }
                    formDiv.innerHTML += `<div style='margin-bottom:8px;'><label style='color:#1976d2;'>${f}</label><input type='text' id='dyn_${f}' value='${v}' style='width:220px;padding:6px 10px;border-radius:6px;border:1px solid #bdbdbd;'></div>`;
                });
                formDiv.style.display = 'block';
            } else {
                formDiv.style.display = 'none';
            }
        });
        // Ø¹Ù†Ø¯ Ø§Ù„Ø¥Ø±Ø³Ø§Ù„: Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ ÙÙˆØ±Ù… Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠØŒ Ø§Ø¬Ù…Ø¹ Ø§Ù„Ù‚ÙŠÙ… ÙˆØ¶Ø¹Ù‡Ø§ ÙÙŠ body ÙƒÙ€ JSON
        async function sendRequest() {
            const method = document.getElementById('method').value;
            let endpoint = document.getElementById('endpoint').value.trim();
            let body = document.getElementById('body').value.trim();
            const token = localStorage.getItem('access_token');
            // Ø¬Ù…Ø¹ Ø§Ù„Ù‚ÙŠÙ… Ù…Ù† Ø§Ù„ÙÙˆØ±Ù… Ø§Ù„Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø¸Ø§Ù‡Ø±
            const formDiv = document.getElementById('dynamicForm');
            if(formDiv && formDiv.style.display !== 'none' && formDiv.children.length) {
                let obj = {};
                Array.from(formDiv.querySelectorAll('input')).forEach(inp => {
                    obj[inp.id.replace('dyn_','')] = inp.value;
                });
                body = JSON.stringify(obj);
                document.getElementById('body').value = body;
            }
            let options = { method, headers: { 'Authorization': 'Bearer ' + token } };
            if(['POST','PUT','PATCH'].includes(method) && body) {
                options.headers['Content-Type'] = 'application/json';
                options.body = body;
            }
            let res, data, text;
            try {
                res = await fetch(endpoint, options);
                text = await res.text();
                try { data = JSON.parse(text); } catch { data = text; }
                document.getElementById('apiResult').style.display = 'block';
                document.getElementById('apiResult').textContent = JSON.stringify(data, null, 2);
            } catch (e) {
                document.getElementById('apiResult').style.display = 'block';
                document.getElementById('apiResult').textContent = 'Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø£Ùˆ ÙÙŠ Ø§Ù„Ø±Ø§Ø¨Ø·.';
            }
        }
        function updateFinalUrl() {
            const endpoint = document.getElementById('endpoint').value;
            document.getElementById('finalUrl').textContent = endpoint;
        }
        document.getElementById('endpoint').addEventListener('input', updateFinalUrl);
        document.getElementById('urlList').addEventListener('change', updateFinalUrl);
        updateFinalUrl();
        function logout() {
            localStorage.removeItem('dashboard_logged_in');
            localStorage.removeItem('dashboard_email');
            localStorage.removeItem('access_token');
            localStorage.removeItem('refresh_token');
            window.location.href = '/static/login.html';
        }
        // ØªØ¹Ø±ÙŠÙ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ù†Ø¯Ø¨ÙˆÙŠÙ†ØªØ§Øª Ù…Ø¹ Ø§Ù„ØªØµÙ†ÙŠÙ (ÙŠØ¬Ø¨ Ø£Ù† ÙŠÙƒÙˆÙ† Ù‚Ø¨Ù„ Ø£ÙŠ Ø§Ø³ØªØ®Ø¯Ø§Ù…)
        const endpointsBySection = {
            'Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª': [
                {url:'/api/products/', label:'Ø¬Ù„Ø¨ ÙƒÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª', method:'GET'},
                {url:'/api/products/{id}/', label:'ØªÙØ§ØµÙŠÙ„ Ù…Ù†ØªØ¬', method:'GET'},
                {url:'/api/products/{id}/update/', label:'ØªØ­Ø¯ÙŠØ« Ù…Ù†ØªØ¬', method:'PUT'},
                {url:'/api/products/{id}/delete/', label:'Ø­Ø°Ù Ù…Ù†ØªØ¬', method:'DELETE'},
                {url:'/api/products/{id}/reviews-stats/', label:'Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ù…Ø±Ø§Ø¬Ø¹Ø§Øª Ù…Ù†ØªØ¬', method:'GET'},
                {url:'/api/products/{id}/reactions/', label:'ØªÙØ§Ø¹Ù„Ø§Øª Ù…Ù†ØªØ¬', method:'GET'},
                {url:'/api/products/{id}/inventory/', label:'Ù…Ø®Ø²ÙˆÙ† Ù…Ù†ØªØ¬', method:'GET'}
            ],
            'Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª': [
                {url:'/api/categories/', label:'Ø¬Ù„Ø¨ ÙƒÙ„ Ø§Ù„ØªØµÙ†ÙŠÙØ§Øª', method:'GET'},
                {url:'/api/categories/{catid}/', label:'ØªÙØ§ØµÙŠÙ„ ØªØµÙ†ÙŠÙ', method:'GET'},
                {url:'/api/categories/{catid}/update/', label:'ØªØ­Ø¯ÙŠØ« ØªØµÙ†ÙŠÙ', method:'PUT'},
                {url:'/api/categories/{catid}/delete/', label:'Ø­Ø°Ù ØªØµÙ†ÙŠÙ', method:'DELETE'}
            ],
            'Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©': [
                {url:'/api/brands/', label:'Ø¬Ù„Ø¨ ÙƒÙ„ Ø§Ù„Ø¹Ù„Ø§Ù…Ø§Øª Ø§Ù„ØªØ¬Ø§Ø±ÙŠØ©', method:'GET'},
                {url:'/api/brands/{id}/', label:'ØªÙØ§ØµÙŠÙ„ Ø¹Ù„Ø§Ù…Ø© ØªØ¬Ø§Ø±ÙŠØ©', method:'GET'},
                {url:'/api/brands/{id}/update/', label:'ØªØ­Ø¯ÙŠØ« Ø¹Ù„Ø§Ù…Ø© ØªØ¬Ø§Ø±ÙŠØ©', method:'PUT'},
                {url:'/api/brands/{id}/delete/', label:'Ø­Ø°Ù Ø¹Ù„Ø§Ù…Ø© ØªØ¬Ø§Ø±ÙŠØ©', method:'DELETE'}
            ],
            'Ø§Ù„Ù…ØªØ§Ø¬Ø±': [
                {url:'/api/shop/', label:'Ø¬Ù„Ø¨ ÙƒÙ„ Ø§Ù„Ù…ØªØ§Ø¬Ø±', method:'GET'},
                {url:'/api/shop/{shopid}/', label:'ØªÙØ§ØµÙŠÙ„ Ù…ØªØ¬Ø±', method:'GET'},
                {url:'/api/shop/{shopid}/update/', label:'ØªØ­Ø¯ÙŠØ« Ù…ØªØ¬Ø±', method:'PUT'},
                {url:'/api/shop/{shopid}/delete/', label:'Ø­Ø°Ù Ù…ØªØ¬Ø±', method:'DELETE'}
            ],
            'Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙˆÙ†': [
                {url:'/api/auth/users/', label:'Ø¬Ù„Ø¨ ÙƒÙ„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…ÙŠÙ†', method:'GET'},
                {url:'/api/auth/users/{userid}/', label:'ØªÙØ§ØµÙŠÙ„ Ù…Ø³ØªØ®Ø¯Ù…', method:'GET'},
                {url:'/api/auth/users/{userid}/update/', label:'ØªØ­Ø¯ÙŠØ« Ù…Ø³ØªØ®Ø¯Ù…', method:'PUT'},
                {url:'/api/auth/users/{userid}/delete/', label:'Ø­Ø°Ù Ù…Ø³ØªØ®Ø¯Ù…', method:'DELETE'}
            ],
            'Ø£Ø®Ø±Ù‰': [
                {url:'/api/recommendations/', label:'ØªÙˆØµÙŠØ§Øª', method:'GET'},
                {url:'/api/notifications/', label:'Ø¥Ø´Ø¹Ø§Ø±Ø§Øª', method:'GET'},
                {url:'/api/user/preferences/', label:'ØªÙØ¶ÙŠÙ„Ø§Øª Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…', method:'GET'},
                {url:'/api/user/', label:'Ø§Ù„Ù…ÙØ¶Ù„Ø§Øª', method:'GET'},
                {url:'/api/verification/', label:'Ø§Ù„ØªØ­Ù‚Ù‚', method:'GET'},
                {url:'/api/comparison/', label:'Ø§Ù„Ù…Ù‚Ø§Ø±Ù†Ø§Øª', method:'GET'},
                {url:'/api/dashboard/', label:'Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª', method:'GET'},
                {url:'/api/promotions/', label:'Ø§Ù„Ø¹Ø±ÙˆØ¶ Ø§Ù„ØªØ±ÙˆÙŠØ¬ÙŠØ©', method:'GET'},
                {url:'/api/reviews/', label:'Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø§Øª', method:'GET'}
            ]
        };
        // Ø±Ø³Ù… Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ù†Ø¯Ø¨ÙˆÙŠÙ†ØªØ§Øª ÙÙŠ Ø§Ù„ØµÙØ­Ø© Ø¨Ø´ÙƒÙ„ Ù…Ø³Ø·Ø­ (Ø¨Ø¯ÙˆÙ† ØªÙ‚Ø³ÙŠÙ… Ø£Ù‚Ø³Ø§Ù…)
        function renderAllEndpointsFlat() {
            const container = document.getElementById('allEndpointsFlat');
            let html = '';
            Object.keys(endpointsBySection).forEach(section => {
                endpointsBySection[section].forEach(ep => {
                    html += `<div style='display:flex;align-items:center;gap:10px;margin-bottom:7px;'><span style='font-family:monospace;background:#f7fafd;padding:4px 10px;border-radius:6px;min-width:260px;direction:ltr;'>[${ep.method}] ${ep.url}</span><span style='color:#263238;'>${ep.label} <span style='color:#1976d2;font-size:0.95em;'>(${section})</span></span><button onclick="quickTestEndpoint('${ep.url}','${ep.method}')" style='background:#1976d2;color:#fff;border:none;border-radius:6px;padding:4px 18px;cursor:pointer;'>Ø§Ø®ØªØ¨Ø§Ø±</button></div>`;
                });
            });
            container.innerHTML = html;
        }
        document.addEventListener('DOMContentLoaded', function() {
            renderAllEndpointsFlat();
            document.getElementById('allEndpointsFlat').style.display = 'block';
        });
        // Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ø®ØªØ¨Ø§Ø±: ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø­Ù‚ÙˆÙ„ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        function quickTestEndpoint(url, method) {
            document.getElementById('endpoint').value = url;
            document.getElementById('method').value = method;
            updateFinalUrl();
            document.getElementById('urlList').value = '';
            // ØªÙØ¹ÙŠÙ„ Ø§Ù„ÙÙˆØ±Ù… Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† endpoint ÙŠØ­ØªØ§Ø¬ body
            const event = new Event('change');
            document.getElementById('urlList').dispatchEvent(event);
            // Ø¥Ø¸Ù‡Ø§Ø± Ø§Ø³Ù… Ø§Ù„Ù‚Ø³Ù…
            let sectionName = '';
            Object.keys(endpointsBySection).forEach(section => {
                if(endpointsBySection[section].find(ep => ep.url === url && ep.method === method))
                    sectionName = section;
            });
            const sectionTitle = document.getElementById('sectionTitle');
            if(sectionName) {
                sectionTitle.textContent = 'Ø§Ù„Ù‚Ø³Ù…: ' + sectionName;
                sectionTitle.style.display = 'block';
            } else {
                sectionTitle.style.display = 'none';
            }
            window.scrollTo({top:0,behavior:'smooth'});
        }
        // Ø¥Ø®ÙØ§Ø¡ Ø¹Ù†Ø§ØµØ± Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ÙØ±Ø¯ÙŠØ© ÙˆØ§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù†Ø³Ø¯Ù„Ø© ÙˆØ§Ù„Ø±Ø§Ø¨Ø· Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠ
        document.getElementById('method').style.display = 'none';
        document.getElementById('urlList').style.display = 'none';
        document.getElementById('endpoint').style.display = 'none';
        document.getElementById('finalUrl').parentElement.style.display = 'none';
        document.querySelectorAll('.param-btn').forEach(btn => btn.style.display = 'none');
        document.getElementById('body').parentElement.style.display = 'none';
        document.querySelectorAll('.endpoint-row').forEach(row => {
            if(row.querySelector('#method') || row.querySelector('#urlList') || row.querySelector('#endpoint')) row.style.display = 'none';
        });
        // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ ÙÙ‚Ø· Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ ÙÙˆØ±Ù… Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ
        document.getElementById('dynamicForm').addEventListener('change', function() {
            const hasInputs = Array.from(this.querySelectorAll('input')).some(inp => inp.value.trim() !== '');
            const submitBtn = document.getElementById('sendRequestBtn');
            if(submitBtn) submitBtn.style.display = hasInputs ? 'inline-block' : 'none';
        });
        // Ø¥Ø®ÙØ§Ø¡ Ø¹Ø±Ø¶ Ø§Ù„Ø£Ù‚Ø³Ø§Ù… Ø§Ù„Ù…Ø¬Ø²Ø£Ø© Ø¥Ø°Ø§ ÙƒØ§Ù† Ù…ÙˆØ¬ÙˆØ¯Ù‹Ø§
        var allEndpointsDiv = document.getElementById('allEndpoints');
        if (allEndpointsDiv) {
            allEndpointsDiv.style.display = 'none';
        }
        // Ø¥Ø¸Ù‡Ø§Ø± Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø§Ù†Ø¯Ø¨ÙˆÙŠÙ†ØªØ§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø± Ø¥Ø°Ø§ Ù„Ù… ØªØ¸Ù‡Ø± ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹
        document.getElementById('showEndpointsBtn').addEventListener('click', function() {
            renderAllEndpointsFlat();
            document.getElementById('allEndpointsFlat').style.display = 'block';
        });
    </script>
</body>
</html>
